(function(g){var d={init:function(a){this.data("jqv")&&null!=this.data("jqv")||(a=d._saveOptions(this,a),g(".formError").live("click",function(){g(this).fadeOut(150,function(){g(this).parent(".formErrorOuter").remove();g(this).remove()})}));return this},attach:function(a){if(!g(this).is("form"))return alert("Sorry, jqv.attach() only applies to a form"),this;a=a?d._saveOptions(this,a):this.data("jqv");a.validateAttribute=this.find("[data-validation-engine*=validate]").length?"data-validation-engine": "class";a.binded&&(this.find("["+a.validateAttribute+"*=validate]").not("[type=checkbox]").not("[type=radio]").not(".datepicker").bind(a.validationEventTrigger,d._onFieldEvent),this.find("["+a.validateAttribute+"*=validate][type=checkbox],["+a.validateAttribute+"*=validate][type=radio]").bind("click",d._onFieldEvent),this.find("["+a.validateAttribute+"*=validate][class*=atepicker]").bind("change",{delay:300},d._onFieldEvent));a.autoPositionUpdate&&g(window).bind("resize",{noAnimation:!0,formElem:this}, d.updatePromptsPosition);this.bind("submit",d._onSubmitEvent);return this},resetOptions:function(a){if(!g(this).is("form"))return alert("Sorry, jqv.attach() only applies to a form"),this;a=a?d._saveOptions(this,a):this.data("jqv");a.validateAttribute=this.find("[data-validation-engine*=validate]").length?"data-validation-engine":"class";a.binded&&(this.find("["+a.validateAttribute+"*=validate]").not("[type=checkbox]").not("[type=radio]").not(".datepicker").bind(a.validationEventTrigger,d._onFieldEvent), this.find("["+a.validateAttribute+"*=validate][type=checkbox],["+a.validateAttribute+"*=validate][type=radio]").bind("click",d._onFieldEvent),this.find("["+a.validateAttribute+"*=validate][class*=atepicker]").bind("change",{delay:300},d._onFieldEvent));a.autoPositionUpdate&&g(window).bind("resize",{noAnimation:!0,formElem:this},d.updatePromptsPosition);return this},detach:function(){if(!g(this).is("form"))return alert("Sorry, jqv.detach() only applies to a form"),this;var a=this.data("jqv");this.find("["+ a.validateAttribute+"*=validate]").not("[type=checkbox]").unbind(a.validationEventTrigger,d._onFieldEvent);this.find("["+a.validateAttribute+"*=validate][type=checkbox],[class*=validate][type=radio]").unbind("click",d._onFieldEvent);this.unbind("submit",d.onAjaxFormComplete);this.find("["+a.validateAttribute+"*=validate]").not("[type=checkbox]").die(a.validationEventTrigger,d._onFieldEvent);this.find("["+a.validateAttribute+"*=validate][type=checkbox]").die("click",d._onFieldEvent);this.die("submit", d.onAjaxFormComplete);this.removeData("jqv");a.autoPositionUpdate&&g(window).unbind("resize",d.updatePromptsPosition);return this},validate:function(){if(g(this).is("form"))return d._validateFields(this);var a=g(this).closest("form").data("jqv"),b=d._validateField(g(this),a);if(a.onSuccess&&0==a.InvalidFields.length)a.onSuccess();else if(a.onFailure&&0<a.InvalidFields.length)a.onFailure();return b},updatePromptsPosition:function(a){if(a&&this==window)var b=a.data.formElem,c=a.data.noAnimation;else b= g(this.closest("form"));var f=b.data("jqv");b.find("["+f.validateAttribute+"*=validate]").not(":disabled").each(function(){var a=g(this),b=d._getPrompt(a),n=g(b).find(".formErrorContent").html();b&&d._updatePrompt(a,g(b),n,void 0,!1,f,c)});return this},showPrompt:function(a,b,c,f){var e=this.closest("form").data("jqv");e||(e=d._saveOptions(this,e));c&&(e.promptPosition=c);e.showArrow="true"==f;d._showPrompt(this,a,b,!1,e);return this},hide:function(){var a=g(this).closest("form");if(0==a.length)return this; var a=a.data("jqv"),b;b=g(this).is("form")?"parentForm"+d._getClassName(g(this).attr("id")):d._getClassName(g(this).attr("id"))+"formError";a.messageOnID=null;g("."+b).parent(".formErrorOuter").remove();g("."+b).remove();return this},hideAll:function(){var a=this.data("jqv"),a=a?a.fadeDuration:0.3;g(".formError").fadeTo(a,0.3,function(){g(this).parent(".formErrorOuter").remove();g(this).remove()});return this},_onFieldEvent:function(a){var b=g(this),c=b.closest("form").data("jqv");window.setTimeout(function(){d._validateField(b, c);if(0==c.InvalidFields.length&&c.onSuccess)c.onSuccess();else if(0<c.InvalidFields.length&&c.onFailure)c.onFailure()},a.data?a.data.delay:0)},_onSubmitEvent:function(){var a=g(this),b=a.data("jqv"),c=d._validateFields(a,b.ajaxFormValidation);return c&&b.ajaxFormValidation?(d._validateFormWithAjax(a,b),!1):b.onValidationComplete?(b.onValidationComplete(a,c),!1):c},_checkAjaxStatus:function(a){var b=!0;g.each(a.ajaxValidCache,function(a,f){if(!f)return b=!1});return b},_validateFields:function(a, b){var c=a.data("jqv"),f=!1;a.trigger("jqv.form.validating");var e=null;a.find("["+c.validateAttribute+"*=validate]").not(":disabled").each(function(){var h=g(this),k=[];if(0>g.inArray(h.attr("name"),k)){(f|=d._validateField(h,c,b))&&null==e&&(e=h.is(":hidden")&&c.prettySelect?h=a.find("#"+c.usePrefix+h.attr("id")+c.useSuffix):h);if(c.doNotShowAllErrosOnSubmit)return!1;k.push(h.attr("name"))}});a.trigger("jqv.form.result",[f]);if(f){if(c.scroll){var h=e.offset().top,n=e.offset().left,l=c.promptPosition; "string"==typeof l&&-1!=l.indexOf(":")&&(l=l.substring(0,l.indexOf(":")));"bottomRight"!=l&&"bottomLeft"!=l&&(h=d._getPrompt(e).offset().top);if(c.isOverflown){l=g(c.overflownDIV);if(!l.length)return!1;n=l.scrollTop();l=-parseInt(l.offset().top);h+=n+l-5;g(c.overflownDIV+":not(:animated)").animate({scrollTop:h},1100,function(){c.focusFirstField&&e.focus()})}else g("html:not(:animated),body:not(:animated)").animate({scrollTop:h,scrollLeft:n},1100,function(){c.focusFirstField&&e.focus()})}else c.focusFirstField&& e.focus();return!1}return!0},_validateFormWithAjax:function(a,b){var c=a.serialize(),f=b.ajaxFormValidationURL?b.ajaxFormValidationURL:a.attr("action");g.ajax({type:b.ajaxFormValidationMethod,url:f,cache:!1,dataType:"json",data:c,form:a,methods:d,options:b,beforeSend:function(){return b.onBeforeAjaxFormValidation(a,b)},error:function(a,b){d._ajaxError(a,b)},success:function(c){if(!0!==c){for(var f=!1,n=0;n<c.length;n++){var l=c[n],m=g(g("#"+l[0])[0]);if(1==m.length){var k=l[2];!0==l[1]?""!=k&&k?(b.allrules[k]&& (l=b.allrules[k].alertTextOk)&&(k=l),d._showPrompt(m,k,"pass",!1,b,!0)):d._closePrompt(m,b):(f|=1,b.allrules[k]&&(l=b.allrules[k].alertText)&&(k=l),d._showPrompt(m,k,"",!1,b,!0))}}b.onAjaxFormComplete(!f,a,c,b)}else b.onAjaxFormComplete(!0,a,"",b)}})},_validateField:function(a,b,c){a.attr("id")||(a.attr("id","form-validation-field-"+g.validationEngine.fieldIdCounter),++g.validationEngine.fieldIdCounter);if(a.is(":hidden")&&!b.prettySelect||a.parents().is(":hidden"))return!1;var f=a.attr(b.validateAttribute), f=/validate\[(.*)\]/.exec(f);if(!f)return!1;var e=f[1].split(/\[|,|\]/),f=!1,h=a.attr("name"),n="",l=!1;b.isError=!1;b.showArrow=!0;for(var m=g(a.closest("form")),k=0;k<e.length;k++){e[k]=e[k].replace(" ","");var p=void 0;switch(e[k]){case "required":l=!0;p=d._getErrorMessage(m,a,e[k],e,k,b,d._required);break;case "custom":p=d._getErrorMessage(m,a,e[k],e,k,b,d._custom);break;case "groupRequired":var q=m.find("["+b.validateAttribute+"*="+e[k+1]+"]").eq(0);if(q[0]!=a[0]){d._validateField(q,b,c);b.showArrow= !0;continue}(p=d._getErrorMessage(m,a,e[k],e,k,b,d._groupRequired))&&(l=!0);b.showArrow=!1;break;case "ajax":c||(d._ajax(a,e,k,b),f=!0);break;case "minSize":p=d._getErrorMessage(m,a,e[k],e,k,b,d._minSize);break;case "maxSize":p=d._getErrorMessage(m,a,e[k],e,k,b,d._maxSize);break;case "min":p=d._getErrorMessage(m,a,e[k],e,k,b,d._min);break;case "max":p=d._getErrorMessage(m,a,e[k],e,k,b,d._max);break;case "dateIsBefore":p=d._dateIsBefore(m,a,e,k,b);break;case "dateIsAfter":p=d._dateIsAfter(m,a,e,k, b);break;case "dateRange":p=d._dateRange(m,a,e,k,b);break;case "isDate":p=d._isDate(m,a,e,k,b);break;case "isTime":p=d._isTime(m,a,e,k,b);break;case "timeIsAfter":p=d._timeIsAfter(m,a,e,k,b);break;case "exactLength":p=d._exactLength(a,e,k,b);break;case "maxCheckbox":a=g(m.find("input[name='"+h+"']"));p=d._getErrorMessage(m,a,e[k],e,k,b,d._maxCheckbox);break;case "minCheckbox":a=g(m.find("input[name='"+h+"']"));p=d._getErrorMessage(m,a,e[k],e,k,b,d._minCheckbox);break;case "minDTCheckboxRequired":a= g("#"+h);p=d._getErrorMessage(m,a,e[k],e,k,b,d._minDTCheckboxRequired);void 0!==p&&(l=!0);a=g("#dtValidationErrorPrompt");break;case "equals":p=d._getErrorMessage(m,a,e[k],e,k,b,d._equals);break;case "funcCall":p=d._getErrorMessage(m,a,e[k],e,k,b,d._funcCall);break;case "funcCallRequired":p=d._getErrorMessage(m,a,e[k],e,k,b,d._funcCallRequired);void 0!==p&&(l=!0);break;case "creditCard":p=d._getErrorMessage(m,a,e[k],e,k,b,d._creditCard);break;case "condRequired":p=d._getErrorMessage(m,a,e[k],e,k, b,d._condRequired);void 0!==p&&(l=!0);break;case "notEqual":p=d._getErrorMessage(m,a,e[k],e,k,b,d._notEqual)}void 0!==p&&(n+=p+"<br/>",b.isError=!0)}l||""!=a.val()||p||(b.isError=!1);c=a.prop("type");("radio"==c||"checkbox"==c)&&1<m.find("input[name='"+h+"']").size()&&(a=g(m.find("input[name='"+h+"'][type!=hidden]:first")),b.showArrow=!1);a.is(":hidden")&&b.prettySelect&&(a=m.find("#"+b.usePrefix+a.attr("id")+b.useSuffix));b.isError?d._showPrompt(a,n,"",!1,b):f||d._closePrompt(a,b);f||a.trigger("jqv.field.result", [a,b.isError,n]);c=g.inArray(a[0],b.InvalidFields);-1==c?b.isError&&b.InvalidFields.push(a[0]):b.isError||b.InvalidFields.splice(c,1);return b.isError},_getErrorMessage:function(a,b,c,f,e,h,n){"custom"==c&&(c=jQuery.inArray(c,f)+1,c="custom["+f[c]+"]");var l=g(b).attr("id"),m=(b.attr("data-validation-engine")?b.attr("data-validation-engine"):b.attr("class")).split(" "),l=d._getCustomErrorMessage(l,m,c,h);a="dateIsAfter"==c||"dateIsBefore"==c||"maxCheckbox"==c||"minCheckbox"==c?n(a,b,f,e,h):n(b,f, e,h);return void 0!=a&&l?l:a},_getCustomErrorMessage:function(a,b,c,f){var e=!1;a="#"+a;if("undefined"!=typeof f.custom_error_messages[a]&&"undefined"!=typeof f.custom_error_messages[a][c])e=f.custom_error_messages[a][c].message;else if(0<b.length)for(a=0;a<b.length&&0<b.length;a++){var d="."+b[a];if("undefined"!=typeof f.custom_error_messages[d]&&"undefined"!=typeof f.custom_error_messages[d][c]){e=f.custom_error_messages[d][c].message;break}}e||"undefined"==typeof f.custom_error_messages[c]||"undefined"== typeof f.custom_error_messages[c].message||(e=f.custom_error_messages[c].message);return e},_required:function(a,b,c,f){switch(a.prop("type")){default:if(!g.trim(a.val())||a.val()==a.attr("data-validation-placeholder"))return f.allrules[b[c]].alertText;break;case "radio":case "checkbox":var e=a.closest("form");a=a.attr("name");if(0==e.find("input[name='"+a+"']:checked").size())return 1==e.find("input[name='"+a+"']").size()?f.allrules[b[c]].alertTextCheckboxe:f.allrules[b[c]].alertTextCheckboxMultiple}}, _groupRequired:function(a,b,c,f){var e="["+f.validateAttribute+"*="+b[c+1]+"]",h=!1;a.closest("form").find(e).each(function(){if(!d._required(g(this),b,c,f))return h=!0,!1});if(!h)return f.allrules[b[c]].alertText},_custom:function(a,b,c,f){var e=b[c+1],d=f.allrules[e];if(d)if(d.regex)if(b=d.regex,!b)alert("jqv:custom regex not found - "+e);else{if(!RegExp(b).test(a.val()))return f.allrules[e].alertText}else if(d.func)if(d=d.func,"function"!==typeof d)alert("jqv:custom parameter 'function' is no function - "+ e);else{if(!d(a,b,c,f))return f.allrules[e].alertText}else alert("jqv:custom type not allowed "+e);else alert("jqv:custom rule not found - "+e)},_funcCall:function(a,b,c,f){var e=b[c+1];if(-1<e.indexOf(".")){for(var e=e.split("."),d=window;e.length;)d=d[e.shift()];e=d}else e=window[e]||f.customFunctions[e];if("function"==typeof e)return e(a,b,c,f)},_funcCallRequired:function(a,b,c,f){var e=b[c+1];if(-1<g.inArray(".",e)){for(var e=e.split("."),d=window;e.length;)d=d[e.shift()];e=d}else e=window[e]|| f.customFunctions[e];if("function"==typeof e)return e(a,b,c,f)},_equals:function(a,b,c,f){b=b[c+1];if(a.val()!=g("#"+b).val())return f.allrules.equals.alertText},_maxSize:function(a,b,c,f){b=b[c+1];if(a.val().length>b)return a=f.allrules.maxSize,a.alertText+b+a.alertText2},_minSize:function(a,b,c,f){b=b[c+1];if(a.val().length<b)return a=f.allrules.minSize,a.alertText+b+a.alertText2},_min:function(a,b,c,f){b=parseFloat(b[c+1]);if(parseFloat(a.val())<b)return a=f.allrules.min,a.alertText2?a.alertText+ b+a.alertText2:a.alertText+b},_max:function(a,b,c,f){b=parseFloat(b[c+1]);if(parseFloat(a.val())>b)return a=f.allrules.max,a.alertText2?a.alertText+b+a.alertText2:a.alertText+b},_dateIsBefore:function(a,b,c,f,e){c=c[f+1];a=g(a.find("input[name='"+c.replace(/^#+/,"")+"']"));if("now"==c.toLowerCase())a=new Date;else if(void 0!=a.val()){if(a.is(":disabled"))return;a=d._parseDate(a.val())}else a=d._parseDate(c);if(d._parseDate(b.val())>a)return b=e.allrules.dateIsBefore,"now"==c.toLowerCase()?b.alertText: b.alertText2+d._dateToString(a)},_dateIsAfter:function(a,b,c,f,e){c=c[f+1];a=g(a.find("input[name='"+c.replace(/^#+/,"")+"']"));if("now"==c.toLowerCase())a=new Date;else if(void 0!=a.val()){if(a.is(":disabled"))return;a=d._parseDate(a.val())}else a=d._parseDate(c);if(d._parseDate(b.val())<a)return b=e.allrules.dateIsAfter,"now"==c.toLowerCase()?b.alertText:b.alertText2+d._dateToString(a)},_isDate:function(a,b,c,f,e){a="pass";var d=b.val().match(/^(\d{1,2})(\/|-)(\d{1,2})(\/|-)(\d{4})$/);null==d&& (a="fail");if("fail"!=a){c=d[1];f=d[3];d=d[5];if(1>c||12<c)a="fail";if(1>f||31<f)a="fail";4!=c&&6!=c&&9!=c&&11!=c||31!=f||(a="fail");2==c&&(29<f||29==f&&(0!=d%4||0==d%100&&0!=d%400))&&(a="fail");if(1800>d||2050<d)a="fail"}if("fail"==a&&0<b.val().length)return e.allrules.isDate.alertText},_exactLength:function(a,b,c,d){b=b[c+1];if(a.val().length!=b)return a=d.allrules.exactLength,a.alertText+b+a.alertText2},_isTime:function(a,b,c,d,e){a="pass";null==b.val().match(/^([01]\d|2[0-3]):([0-5]\d)$/)&&(a= "fail");if("fail"==a&&0<b.val().length)return e.allrules.isTime.alertText},_timeIsAfter:function(a,b,c,d,e){c=c[d+1];a=g(a.find("input[name='"+c.replace(/^#+/,"")+"']"));a.val();b.val();if(void 0!=a.val()){if(a.is(":disabled"))return;a=Date.parse("01/01/1900 "+a.val())}else a=Date.parse("01/01/1900 "+c);if(Date.parse("01/01/1900 "+b.val())<a)return e.allrules.timeIsAfter.alertText},_isDateTime:function(a){return RegExp(/^\d{4}[\/\-](0?[1-9]|1[012])[\/\-](0?[1-9]|[12][0-9]|3[01])\s+(1[012]|0?[1-9]){1}:(0?[1-5]|[0-6][0-9]){1}:(0?[0-6]|[0-6][0-9]){1}\s+(am|pm|AM|PM){1}$|^(?:(?:(?:0?[13578]|1[02])(\/|-)31)|(?:(?:0?[1,3-9]|1[0-2])(\/|-)(?:29|30)))(\/|-)(?:[1-9]\d\d\d|\d[1-9]\d\d|\d\d[1-9]\d|\d\d\d[1-9])$|^((1[012]|0?[1-9]){1}\/(0?[1-9]|[12][0-9]|3[01]){1}\/\d{2,4}\s+(1[012]|0?[1-9]){1}:(0?[1-5]|[0-6][0-9]){1}:(0?[0-6]|[0-6][0-9]){1}\s+(am|pm|AM|PM){1})$/).test(a)}, _dateCompare:function(a,b){return new Date(a.toString())<new Date(b.toString())},_dateRange:function(a,b,c,f,e){var h=c[f+1];a=g(a.find("input[name='"+h.replace(/^#+/,"")+"']"));c=c[f+2];if(void 0!=a.val()){if(a.is(":disabled"))return;h=d._parseDate(a.val())}else h=d._parseDate(h);b=d._parseDate(b.val());if((Date.parse(b)-Date.parse(h))/864E5>c)return e=e.allrules.dateRange,e.alertText+c+e.alertText2},_maxCheckbox:function(a,b,c,d,e){c=c[d+1];b=b.attr("name");if(a.find("input[name='"+b+"']:checked").size()> c)return e.showArrow=!1,e.allrules.maxCheckbox.alertText2?e.allrules.maxCheckbox.alertText+" "+c+" "+e.allrules.maxCheckbox.alertText2:e.allrules.maxCheckbox.alertText},_minCheckbox:function(a,b,c,d,e){c=c[d+1];b=b.attr("name");if(a.find("input[name='"+b+"']:checked").size()<c)return e.showArrow=!1,e.allrules.minCheckbox.alertText+" "+c+" "+e.allrules.minCheckbox.alertText2},_minDTCheckboxRequired:function(a,b,c,d){b=b[c+1];if(g(a.dataTable().$(":checked",{filter:"none",page:"all"})).length<b)return d.showArrow= !1,d.allrules.minDTCheckboxRequired.alertText+" "+b+" "+d.allrules.minDTCheckboxRequired.alertText2},_creditCard:function(a,b,c,d){c=!1;a=a.val().replace(/ +/g,"").replace(/-+/g,"");var e=a.length;if(14<=e&&16>=e&&0<parseInt(a)){b=0;c=e-1;var e=1,g,n=new String;do g=parseInt(a.charAt(c)),n+=0==e++%2?2*g:g;while(0<=--c);for(c=0;c<n.length;c++)b+=parseInt(n.charAt(c));c=0==b%10}if(!c)return d.allrules.creditCard.alertText},_ajax:function(a,b,c,f){var e=f.allrules[b[c+1]];c=e.extraData;var h=e.extraDataDynamic; b={fieldId:a.attr("id"),fieldValue:a.val()};if("object"===typeof c)g.extend(b,c);else if("string"===typeof c){var n=c.split("&");for(c=0;c<n.length;c++){var l=n[c].split("=");l[0]&&l[0]&&(b[l[0]]=l[1])}}if(h)for(h=String(h).split(","),c=0;c<h.length;c++)n=h[c],g(n).length&&(l=a.closest("form").find(n).val(),n.replace("#",""),escape(l),b[n.replace("#","")]=l);f.isError||g.ajax({type:f.ajaxFormValidationMethod,url:e.url,cache:!1,dataType:"json",data:b,field:a,rule:e,methods:d,options:f,beforeSend:function(){var b= e.alertTextLoad;b&&d._showPrompt(a,b,"load",!0,f)},error:function(a,b){d._ajaxError(a,b)},success:function(a){var b=a[0],c=g(g("input[id='"+b+"']")[0]);if(1==c.length){var h=a[2];a[1]?(void 0!==f.ajaxValidCache[b]&&(f.ajaxValidCache[b]=!0),h?f.allrules[h]&&(a=f.allrules[h].alertTextOk)&&(h=a):h=e.alertTextOk,h?d._showPrompt(c,h,"pass",!0,f):d._closePrompt(c,f)):(f.ajaxValidCache[b]=!1,f.isError=!0,h?f.allrules[h]&&(a=f.allrules[h].alertText)&&(h=a):h=e.alertText,d._showPrompt(c,h,"",!0,f))}c.trigger("jqv.field.result", [c,f.isError,h])}})},_ajaxError:function(a,b){0==a.status&&null==b?alert("The page is not served from a server! ajax call failed"):"undefined"!=typeof console&&console.log("Ajax error: "+a.status+" "+b)},_notEqual:function(a,b,c,d){b=b[c+1];if(a.val()==g("#"+b).val()&&""!=a.val())return d.allrules.notEqual.alertText+b+d.allrules.notEqual.alertText2},_dateToString:function(a){return a.getMonth()+1+"/"+a.getDate()+"/"+a.getFullYear()},_parseDate:function(a){var b=a.split("-");b==a&&(b=a.split("/")); return new Date(b[2],b[0]-1,b[1])},_showPrompt:function(a,b,c,f,e,h){var g=d._getPrompt(a);h&&(g=!1);g?d._updatePrompt(a,g,b,c,f,e):d._buildPrompt(a,b,c,f,e)},_buildPrompt:function(a,b,c,f,e){a.addClass("error");if(null==e.messageOnID||e.messageOnID==a.attr("id"))e.messageOnID=a.attr("id");else return!0;var h=g("<div>");h.addClass(d._getClassName(a.attr("id"))+"formError");h.addClass("parentForm"+d._getClassName(a.parents("form").attr("id")));h.addClass("formError");switch(c){case "pass":h.addClass("greenPopup"); break;case "load":h.addClass("blackPopup")}f&&h.addClass("ajaxed");g("<div>").addClass("formErrorContent").html(b).appendTo(h);if(e.showArrow)switch(b=g("<div>").addClass("formErrorArrow"),c=a.data("promptPosition")||e.promptPosition,"string"==typeof c&&(f=c.indexOf(":"),-1!=f&&(c=c.substring(0,f))),c){case "bottomLeft":case "bottomRight":h.find(".formErrorContent").before(b);b.addClass("formErrorArrowBottom").html('<div class="line1">\x3c!-- --\x3e</div><div class="line2">\x3c!-- --\x3e</div><div class="line3">\x3c!-- --\x3e</div><div class="line4">\x3c!-- --\x3e</div><div class="line5">\x3c!-- --\x3e</div><div class="line6">\x3c!-- --\x3e</div><div class="line7">\x3c!-- --\x3e</div><div class="line8">\x3c!-- --\x3e</div><div class="line9">\x3c!-- --\x3e</div><div class="line10">\x3c!-- --\x3e</div>'); break;case "topLeft":case "topRight":b.html('<div class="line10">\x3c!-- --\x3e</div><div class="line9">\x3c!-- --\x3e</div><div class="line8">\x3c!-- --\x3e</div><div class="line7">\x3c!-- --\x3e</div><div class="line6">\x3c!-- --\x3e</div><div class="line5">\x3c!-- --\x3e</div><div class="line4">\x3c!-- --\x3e</div><div class="line3">\x3c!-- --\x3e</div><div class="line2">\x3c!-- --\x3e</div><div class="line1">\x3c!-- --\x3e</div>'),h.append(b)}a.closest(".ui-dialog").length&&h.addClass("formErrorInsideDialog"); h.css({opacity:0,position:"absolute"});a.before(h);f=d._calculatePosition(a,h,e);h.css({top:f.callerTopPosition,left:f.callerleftPosition,marginTop:f.marginTopSize,opacity:0}).data("callerField",a);e.autoHidePrompt&&setTimeout(function(){h.animate({opacity:0},function(){h.closest(".formErrorOuter").remove();h.remove()})},e.autoHideDelay);return h.animate({opacity:0.87})},_updatePrompt:function(a,b,c,f,e,g,n){if(b){if(null==g.messageOnID||g.messageOnID==a.attr("id"))g.messageOnID=a.attr("id");else return d._closePrompt(a, g),a.addClass("error"),!0;"undefined"!==typeof f&&("pass"==f?b.addClass("greenPopup"):b.removeClass("greenPopup"),"load"==f?b.addClass("blackPopup"):b.removeClass("blackPopup"));e?b.addClass("ajaxed"):b.removeClass("ajaxed");b.find(".formErrorContent").html(c);a=d._calculatePosition(a,b,g);a={top:a.callerTopPosition,left:a.callerleftPosition,marginTop:a.marginTopSize};n?b.css(a):b.animate(a)}},_closePrompt:function(a,b){b.messageOnID==a.attr("id")&&(b.messageOnID=null);a.hasClass("customPrompt")|| a.removeClass("error");var c=d._getPrompt(a);c&&!a.hasClass("customPrompt")&&(c.parent(".formErrorOuter").remove(),c.remove(),c=a.closest("form"),d._validateFields(c,b.ajaxFormValidation))},closePrompt:function(a){return d._closePrompt(a)},_getPrompt:function(a){var b=g(a).closest("form").attr("id");a=d._getClassName(a.attr("id"))+"formError";if(b=g("."+d._escapeExpression(a)+".parentForm"+b)[0])return g(b)},_escapeExpression:function(a){return a.replace(/([#;&,\.\+\*\~':"\!\^$\[\]\(\)=>\|])/g,"\\$1")}, isRTL:function(a){var b=g(document),c=g("body");a=a&&a.hasClass("rtl")||a&&"rtl"===(a.attr("dir")||"").toLowerCase()||b.hasClass("rtl")||"rtl"===(b.attr("dir")||"").toLowerCase()||c.hasClass("rtl")||"rtl"===(c.attr("dir")||"").toLowerCase();return Boolean(a)},_calculatePosition:function(a,b,c){var d,e,g,n=a.width(),l=a.position().left,m=a.position().top;a.height();g=b.height();d=e=0;g=-g;c=a.data("promptPosition")||c.promptPosition;var k="",p="",q=p=0;"string"==typeof c&&-1!=c.indexOf(":")&&(k=c.substring(c.indexOf(":")+ 1),c=c.substring(0,c.indexOf(":")),-1!=k.indexOf(",")&&(p=k.substring(k.indexOf(",")+1),k=k.substring(0,k.indexOf(",")),q=parseInt(p),isNaN(q)&&(q=0)),p=parseInt(k),isNaN(k));switch(c){default:case "topRight":e+=l+n-30;d+=m;break;case "topLeft":d+=m;e+=l;break;case "centerRight":d=m+4;g=0;e=l+a.outerWidth(!0)+5;break;case "centerLeft":e=l-(b.width()+2);d=m+4;g=0;break;case "bottomLeft":d=m+a.height()+5;g=0;e=l;break;case "bottomRight":e=l+n-30,d=m+a.height()+5,g=0}return{callerTopPosition:d+q+"px", callerleftPosition:e+p+"px",marginTopSize:g+"px"}},_saveOptions:function(a,b){if(g.validationEngineLanguage)var c=g.validationEngineLanguage.allRules;else g.error("jQuery.validationEngine rules are not loaded, plz add localization files to the page");g.validationEngine.defaults.allrules=c;c=g.extend(!0,{},g.validationEngine.defaults,b);a.data("jqv",c);return c},_getClassName:function(a){if(a)return a.replace(/:/g,"_").replace(/\./g,"_")},_condRequired:function(a,b,c,f){var e;for(c+=1;c<b.length;c++)if(e= jQuery("#"+b[c]).first(),e.length&&void 0==d._required(e,["required"],0,f))return d._required(a,["required"],0,f)}};g.fn.validationEngine=function(a){var b=g(this);if(!b[0])return!1;if("string"==typeof a&&"_"!=a.charAt(0)&&d[a])return"showPrompt"!=a&&"hide"!=a&&"hideAll"!=a&&d.init.apply(b),d[a].apply(b,Array.prototype.slice.call(arguments,1));if("object"!=typeof a&&a)g.error("Method "+a+" does not exist in jQuery.validationEngine");else return d.init.apply(b,arguments),d.attach.apply(b)};g.validationEngine= {fieldIdCounter:0,defaults:{validationEventTrigger:"blur",scroll:!0,focusFirstField:!0,promptPosition:"topRight",bindMethod:"bind",inlineAjax:!1,ajaxFormValidation:!1,ajaxFormValidationURL:!1,ajaxFormValidationMethod:"get",onAjaxFormComplete:g.noop,onBeforeAjaxFormValidation:g.noop,onValidationComplete:!1,doNotShowAllErrosOnSubmit:!1,custom_error_messages:{},binded:!0,showArrow:!0,isError:!1,ajaxValidCache:{},autoPositionUpdate:!1,messageOnID:null,InvalidFields:[],onSuccess:!1,onFailure:!1,autoHidePrompt:!1, autoHideDelay:1E4,fadeDuration:0.3,prettySelect:!1,usePrefix:"",useSuffix:""}};g(function(){g.validationEngine.defaults.promptPosition=d.isRTL()?"topLeft":"topRight"})})(jQuery);